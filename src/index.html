<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ollama Web Interface</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: '#3b82f6',
              secondary: '#64748b',
              success: '#10b981',
              danger: '#ef4444',
              warning: '#f59e0b',
              dark: '#0f172a',
              light: '#f8fafc'
            }
          }
        }
      }
    </script>
    <style>
      .markdown-content h1 { font-size: 1.5em; font-weight: bold; margin: 0.5em 0; }
      .markdown-content h2 { font-size: 1.3em; font-weight: bold; margin: 0.5em 0; }
      .markdown-content h3 { font-size: 1.1em; font-weight: bold; margin: 0.5em 0; }
      .markdown-content p { margin: 0.5em 0; }
      .markdown-content ul, .markdown-content ol { margin: 0.5em 0; padding-left: 1.5em; }
      .markdown-content li { margin: 0.3em 0; }
      .markdown-content pre {
        background-color: #1e293b;
        color: #f1f5f9;
        padding: 1rem;
        border-radius: 0.5rem;
        overflow-x: auto;
        margin: 1rem 0;
      }
      .markdown-content code {
        background-color: #f1f5f9;
        padding: 0.2rem 0.4rem;
        border-radius: 0.25rem;
        font-family: 'Courier New', monospace;
      }
      .markdown-content pre code {
        background-color: transparent;
        padding: 0;
      }
      .markdown-content blockquote {
        border-left: 4px solid #cbd5e1;
        padding-left: 1rem;
        margin: 1rem 0;
        color: #64748b;
      }
      .markdown-content table {
        width: 100%;
        border-collapse: collapse;
        margin: 1rem 0;
      }
      .markdown-content th, .markdown-content td {
        border: 1px solid #cbd5e1;
        padding: 0.5rem;
        text-align: left;
      }
      .markdown-content th {
        background-color: #f1f5f9;
      }
      .message.user-message {
        background-color: #3b82f6;
        color: white;
        border-radius: 1rem 1rem 0 1rem;
        max-width: 80%;
        align-self: flex-end;
      }
      .message.assistant-message {
        background-color: #f1f5f9;
        border-radius: 1rem 1rem 1rem 0;
        max-width: 80%;
        align-self: flex-start;
      }
      .message.system-message {
        background-color: #e2e8f0;
        border-radius: 1rem;
        text-align: center;
        max-width: 80%;
        align-self: center;
        font-style: italic;
      }
      .session-tab.active {
        background-color: #3b82f6;
        color: white;
        font-weight: bold;
      }
      .session-tab {
        transition: all 0.2s ease-in-out;
      }
      .session-tab:hover:not(.active) {
        background-color: #e2e8f0;
      }
      .chat-history {
        display: flex;
        flex-direction: column;
      }
      .message {
        padding: 1rem;
        margin-bottom: 0.5rem;
        animation: fadeIn 0.3s ease-in;
      }
      @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
      }
      .typing-indicator {
        display: flex;
        align-items: center;
      }
      .typing-dot {
        width: 8px;
        height: 8px;
        background-color: #94a3b8;
        border-radius: 50%;
        margin: 0 2px;
        animation: typing 1.4s infinite ease-in-out;
      }
      .typing-dot:nth-child(1) { animation-delay: 0s; }
      .typing-dot:nth-child(2) { animation-delay: 0.2s; }
      .typing-dot:nth-child(3) { animation-delay: 0.4s; }
      @keyframes typing {
        0%, 60%, 100% { transform: translateY(0); }
        30% { transform: translateY(-5px); }
      }
    </style>
</head>
<body class="bg-gray-100 min-h-screen">
    <div id="app" class="max-w-6xl mx-auto px-4 py-8">
        <header class="text-center mb-10">
            <h1 class="text-3xl font-bold text-gray-800 mb-2">Ollama Web Interface</h1>
            <div class="github-link">
                <a href="https://github.com/axfinn/ollamaWeb" target="_blank" rel="noopener noreferrer" class="text-blue-500 hover:text-blue-700 flex items-center justify-center gap-1">
                    <i class="fab fa-github"></i> 查看 GitHub 仓库
                </a>
            </div>
        </header>
        
        <main class="flex flex-col lg:flex-row gap-6">
            <div class="bg-white rounded-xl shadow-lg p-6 w-full lg:w-1/3">
                <h2 class="text-xl font-bold text-gray-800 mb-4">参数配置</h2>
                <div class="space-y-4">
                    <div>
                        <label for="api-host" class="block text-sm font-medium text-gray-700 mb-1">API 地址:</label>
                        <div class="flex gap-2">
                            <input type="text" id="api-host" class="form-control flex-1 border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="http://localhost:11434">
                            <button id="save-api-host" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition">保存</button>
                        </div>
                        <small class="text-gray-500 text-xs">Ollama API 地址，保存后刷新页面生效</small>
                    </div>
                    
                    <div>
                        <label for="model-select" class="block text-sm font-medium text-gray-700 mb-1">选择模型:</label>
                        <div class="flex items-center">
                            <select id="model-select" class="form-control flex-1 border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <option value="llama2">Llama2</option>
                                <option value="mistral">Mistral</option>
                                <option value="codellama">CodeLlama</option>
                            </select>
                        </div>
                    </div>
                    
                    <div>
                        <label for="temperature" class="block text-sm font-medium text-gray-700 mb-1">Temperature: <span id="temperature-value" class="font-semibold">0.7</span></label>
                        <input type="range" id="temperature" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500" min="0" max="1" step="0.01" value="0.7">
                    </div>
                    
                    <div>
                        <label for="max-tokens" class="block text-sm font-medium text-gray-700 mb-1">Max Tokens:</label>
                        <input type="number" id="max-tokens" class="form-control w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" min="1" max="4096" value="2048">
                    </div>
                </div>
            </div>
            
            <div class="bg-white rounded-xl shadow-lg w-full lg:w-2/3 flex flex-col">
                <div class="border-b border-gray-200 p-4">
                    <div class="flex justify-between items-center">
                        <div id="session-tabs" class="flex overflow-x-auto space-x-1"></div>
                        <button id="new-session-btn" class="bg-blue-500 hover:bg-blue-600 text-white w-8 h-8 rounded-full flex items-center justify-center transition">
                            <i class="fas fa-plus"></i>
                        </button>
                    </div>
                </div>
                
                <div class="flex-1 overflow-y-auto p-4 bg-gray-50 chat-history" id="chat-history">
                    <div class="message system-message">
                        <div class="message-content">
                            欢迎使用 Ollama Web Interface！请选择模型并开始对话。
                        </div>
                    </div>
                </div>
                
                <div class="border-t border-gray-200 p-4">
                    <textarea id="user-input" class="w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="输入您的消息... (按Enter发送，Shift+Enter换行，Ctrl+Enter发送)" rows="3"></textarea>
                    <div class="flex justify-end gap-2 mt-3">
                        <button id="clear-btn" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg transition">清空对话</button>
                        <button id="send-btn" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition flex items-center gap-2">
                            <i class="fas fa-paper-plane"></i> 发送
                        </button>
                    </div>
                </div>
            </div>
        </main>
    </div>
    
    <script type="module" src="./main.js"></script>
</body>
</html>